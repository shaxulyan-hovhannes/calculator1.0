<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>The second variable of calculator</title>
        <link rel="stylesheet" href="css/style.css" />
    </head>
    <body>
        <p id="m1" onclick="take(this)">M1</p> 
		<p id="m2" onclick="take(this)">M2</p>
        <div class="calcWrapper">
			<div class="head">
            </div>
			<div class="input">
				<input type="text" id="inputValues" name="inV" maxlength="25" />
				<button id="del">x</button>
			</div>
			<div class="headBtns">
				<button id="m1btn" onmousedown="mDown(this)" onmouseup="mUp(this)">M1</button>
				<button id="m2btn" onmousedown="mDown(this)" onmouseup="mUp(this)">M2</button>
				<button id="binbtn" style="font-size: 33px;" onmousedown="mDown(this)" onmouseup="mUp(this)">Binary</button>
				<button id="sinvbtn"onmousedown="mDown(this)" onmouseup="mUp(this)"><span style="font-size: 25px; vertical-align: top; text-align: center;">Str</span><span style="font-size:15px; vertical-align: top;"><ins>inverse</ins></span></button>
				<button id="cbtn"onmousedown="mDown(this)" onmouseup="mUp(this)">C</button>
				<button id="percbtnType"onmousedown="mDown(this)" onmouseup="mUp(this)">%type</button>
				<button id="percbtnEval"onmousedown="mDown(this)" onmouseup="mUp(this)">%eval</button>
				<button id="numsumbtn"onmousedown="mDown(this)" onmouseup="mUp(this)"><span style="font-size: 25px; vertical-align: top; text-align: center;">Num</span><span style="font-size:15px; vertical-align: top;">sum</span></button>
				<button id="f"onmousedown="mDown(this)" onmouseup="mUp(this)">!</button>
				 </div>
			<div class="indent">
			</div>
			<div class="mainBtnsA">
			    <button id="bipolar"onmousedown="mDown(this)" onmouseup="mUp(this)">+/-</button>
				<button id="powbtn"onmousedown="mDown(this)" onmouseup="mUp(this)">Pow</button>
				<button id="fibbtn" style="font-size: 22px;"onmousedown="mDown(this)" onmouseup="mUp(this)">Fibonacci</button>
				<button id="divbtn" onclick="typeNum('/')"onmousedown="mDown(this)" onmouseup="mUp(this)">&#247;</button>
			</div>
			<div class="indent">
			</div>
			<div class="mainBtnsB">
			    <button id="sevenbtn" onclick="typeNum(7)" onmousedown="mDown(this)">7</button>
				<button id="eightbtn" onclick="typeNum(8)" onmousedown="mDown(this)">8</button>
				<button id="ninebtn" onclick="typeNum(9)" onmousedown="mDown(this)">9</button>
				<button id="multbtn" onclick="typeNum('*')" onmousedown="mDown(this)" onmouseup="mUp(this)">*</button>
			</div>
			<div class="indent">
			</div>
			<div class="mainBtnsC">
				<button id="fourbtn" onclick="typeNum(4)" onmousedown="mDown(this)">4</button>
				<button id="fivebtn" onclick="typeNum(5)" onmousedown="mDown(this)">5</button>
				<button id="sixbtn" onclick="typeNum(6)" onmousedown="mDown(this)">6</button>
				<button id="minbtn" onclick="typeNum('-')" onmousedown="mDown(this)" onmouseup="mUp(this)">-</button>
			</div>
			<div class="indent">
			</div>
			<div class="mainBtnsD">
				<button id="onebtn" onclick="typeNum(1)" onmousedown="mDown(this)">1</button>
				<button id="twobtn" onclick="typeNum(2)" onmousedown="mDown(this)">2</button>
				<button id="threebtn" onclick="typeNum(3)" onmousedown="mDown(this)">3</button>
				<button id="plusbtn" onclick="typeNum('+')" onmousedown="mDown(this)" onmouseup="mUp(this)">+</button>
			</div>
			<div class="indent">
			</div>
			<div class="mainBtnsE">
			    <button id="sqrtbtn"onmousedown="mDown(this)">&#8730;</button>
				<button id="ohbtn" onclick="typeNum('0')" onmousedown="mDown(this)">0</button>
				<button id="pointbtn" onclick="typeNum('.')" onmousedown="mDown(this)">.</button>
				<button id="evalbtn" onmousedown="mDown(this)"onmouseup="mUp2()">=</button>
			</div>
		</div>
        <script>
            /* GLOBAL VARIABLES */
            var varInputValues = document.getElementById("inputValues");
            var varDel = document.getElementById("del") ;
            
            var varm1btn = document.getElementById("m1btn");
            var varm2btn = document.getElementById("m2btn");
            var varM1 = document.getElementById("m1");			
            var varM2 = document.getElementById("m2")
            
            
            var varbinbtn = document.getElementById("binbtn");	
			
            var strinvbtn = document.getElementById("sinvbtn");	
			
            var clearbtn = document.getElementById("cbtn");	
            
            var percentbtntype = document.getElementById("percbtnType");		
            var percentbtneval = document.getElementById("percbtnEval");
            
            var numsumbtn = document.getElementById("numsumbtn");
			
            var factorialbtn = document.getElementById("f");	
			
            var plusminusbtn = document.getElementById("bipolar");			
		
            var powbtn = document.getElementById("powbtn");			
			
            var fibbtn = document.getElementById("fibbtn");	
			
            var sqrtbtn = document.getElementById("sqrtbtn");			
		
            var evalbtn = document.getElementById("evalbtn");			
/* ------------------------------------------------------------------------ */	
            
            function isNumeric(num) {
                return !isNaN(parseFloat(num) && isFinite(num));
            }  /* Checks number or not */
            
            function showError() {
                varInputValues.value = "Error"			
                varInputValues.style.color = "red";
                varInputValues.style.fontWeight = "bold";    
            } /* Shows #ERROR# */ 
            
            
            function inputTextStyle() {
                varInputValues.style.color = "#ff9d00";
                varInputValues.style.fontWeight = "bold";
            }
            
            
            varDel.addEventListener("click", delFirstNum);
			
            function delFirstNum() {
                varInputValues.value = varInputValues.value.slice(0, varInputValues.value.length - 1);	
            }  /* Cuts last element of num or str */
            
            
            varm1btn.addEventListener("click", makeVisibleM1);			
            varm1btn.addEventListener("click", saveM1);	
            
            function makeVisibleM1() {
                varM1.style.visibility = "visible";			
            }  /* visibility from "hidden" TO "visible" */			
			
            function saveM1() {	
                varM1.innerHTML = varInputValues.value;			
            }  /* save everything from "inputValues" in "m1" */
            
            
            varm2btn.addEventListener("click", makeVisibleM2);
            varm2btn.addEventListener("click", saveM2);
			
            function makeVisibleM2() {
                varM2.style.visibility = "visible"			
            }  /* visibility from "hidden" TO "visible" */		
			
            function saveM2() {
                varM2.innerHTML = varInputValues.value;			
            }  /* save everything from "inputValues" in "m2" */
            
            
            varbinbtn.addEventListener("click", getBin);
			
            function getBin() {
                var bin = (isNumeric(varInputValues.value)) ? varInputValues.value = parseInt(varInputValues.value).toString(2) :
			    varInputValues.value = "Error";
                if (varInputValues.value == "Error" ||  varInputValues.value.length > 25) {
                    showError();
                }
                else {
                    inputTextStyle();
                }
                }  /* Transforms num(10) into num(2) */
            
            
            strinvbtn.addEventListener("click", doInverse);
			
            function doInverse() {
                varInputValues.value = (varInputValues.value.split("").reverse()).join("");			
            }  /* does inverse varInputValues.value */
            
            
            clearbtn.addEventListener("click", clearAll);
			
            function clearAll() {
                varInputValues.value = "";			
            }	/* Clears everything in varInputValues */
            
            
            percentbtntype.addEventListener("click", typePercent);
			
            function typePercent() {
                varInputValues.value = varInputValues.value + "%";			
            }  /* Types "%" symbol in varInputValues */			
						
            percentbtneval.addEventListener("click", getPercent);

            function getPercent() {	
                var numValue = varInputValues.value.slice(0, varInputValues.value.indexOf("%"));

            var percentValue = varInputValues.value.slice(numValue.length +	1);

            (isNumeric(numValue) && isNumeric(percentValue)) ? varInputValues.value = parseFloat(percentValue) * (parseFloat(numValue) / 100):
            varInputValues.value = "Error";

            if (varInputValues.value == "Error" || varInputValues.value.length > 25) {
                showError();
            }
                else {
                    varInputValues.style.color = "#ff9d00";
                    varInputValues.style.fontWeight = "bold";
                }			
            }  /* Gets percent of number */	
            
            
            numsumbtn.addEventListener("click", getNumSum);
			
            function getNumSum() {
                if (isNumeric(varInputValues.value)) {
                var sum = 0;			
                for (var i = parseFloat(Math.floor(varInputValues.value)); i >= 0; i--){
                sum += i;
                }	
                varInputValues.value = sum + " " + "Mnacord =>" + +((parseFloat(varInputValues.value - parseFloat(Math.floor(varInputValues.value))))).toFixed(10);
                inputTextStyle();
                }
                else {
                    varInputValues.value = "The length of this string is" + " " + varInputValues.value.length;
                    varInputValues.style.color = "red";
                    varInputValues.style.fontWeight = "bold";			
                }
            }  /* If typeof value is "number", gets the sum of that number, otherwise shows the length of string */	
            
            
            factorialbtn.addEventListener("click", getFactorial);
            
            function getFactorial() {
                if (isNumeric(varInputValues.value)) {
                    if (parseInt(varInputValues.value == 0)) {
                        varInputValues.value = 1;
                        inputTextStyle();
                    }
                    else{
                        var res = 1;
                        var num = parseInt(varInputValues.value);			
                        for (var i = num; i >= 2; i--) {
                            res *= i;	
                        }
                        varInputValues.value = res;
                        inputTextStyle();
                    }
                }
                else {
                    showError();
                }			
            }  /* Counts factorial */
            
            
            plusminusbtn.addEventListener("click", plusOrMinus);
            
            function plusOrMinus() {
                if (isNumeric(varInputValues.value)) {
                    varInputValues.value = -(varInputValues.value);
                    inputTextStyle();
                }
                else {
                    showError();
                }
            }  /* +number changes on -number, and -number changes on +number */
            
            
            powbtn.addEventListener("click", getPow);
			
            function getPow() {
                var numValue = varInputValues.value.slice(0, varInputValues.value.indexOf("*"));
                var powValue = varInputValues.value.slice(numValue.length +	1);
                
                (isNumeric(numValue) && isNumeric(powValue)) ? varInputValues.value = Math.pow(numValue, powValue):
                varInputValues.value = "Error";

                if (varInputValues.value == "Error" ||  varInputValues.value.length > 25) {
                    showError();
                }
                else {
                    inputTextStyle();
                }
            }  /* Gets pow of number */	
            
            
            fibbtn.addEventListener("click", getFib);
			
            function getFib() {
                if (isNumeric(varInputValues.value)) {
                    if (varInputValues.value == 0) {
                        varInputValues.value = 0;
                    }
                    else {
                var fib1 = 1;
                var fib2 = 1;
                for (var i = 3; i <= parseInt(varInputValues.value); i++) {
                    var fibOthers = fib1 + fib2;
                    fib1 = fib2;
                    fib2 = fibOthers;
                }
                    varInputValues.value = fib2;
                    inputTextStyle();
                }
                }
                else {
                    showError();
                }
            }   /* Counts and shows Fibonacci numbers */
            
            
            function typeNum(num) {
                varInputValues.value = varInputValues.value + num;
            }  /* Main function for all numbers and symbols */
            
            
            sqrtbtn.addEventListener("click", getSqrt);
												   
            function getSqrt() {
                if (isNumeric(varInputValues.value)){
                    varInputValues.value = Math.sqrt(parseInt(varInputValues.value));
                    inputTextStyle();
                }
                else {
                    showError();
                }
            }  /* Counts sqrt of number	*/	
            
            
            evalbtn.addEventListener("click", makeEval);
												   
            function makeEval() {
                if (isNumeric(varInputValues.value)) {
                    varInputValues.value = eval(varInputValues.value);
                    inputTextStyle();
                }
                else {
                    showError();
                }
            }  /* Eval of values */
            
            
            function take(value) {
                varInputValues.value += value.innerHTML;
            }	/* Takes values from m1 & m2, and puts into varInputValues.value */
            
            
            function mDown(btn) {
                btn.style.border = "3px solid lightblue";
                btn.style.color = "lightblue";
            }  /* Changes the style onmouseDOWN */
												   
												   
            function mUp(btn) {
                btn.style.border = "3px solid #ff9d00";
                btn.style.color = "#ff9d00";
            }  /* Changes the style onmouseUP */
			
            
           function mUp2() {
               evalbtn.style.border = "3px solid #FF1493";
               evalbtn.style.color = "#FF1493";
           }  /* Changes the style onmouseUP */		
        </script>
    </body>
